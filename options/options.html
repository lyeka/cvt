<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>AI主题总结与思维导图 - 设置</title>
    <style>
        body {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f5f5f5;
        }
        .container {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }
        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 4px;
        }
        input[type="number"] {
            width: 150px;
        }
        .info {
            margin-top: 8px;
            color: #666;
            font-size: 14px;
        }
        .param-description {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }
        .info a {
            color: #007bff;
            text-decoration: none;
        }
        .info a:hover {
            text-decoration: underline;
        }
        .status {
            margin-top: 16px;
            padding: 8px;
            border-radius: 4px;
            display: none;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .save-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .save-btn:hover {
            background-color: #0056b3;
        }
        .section {
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
        .section:last-child {
            border-bottom: none;
        }
        textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: monospace;
            resize: vertical;
            margin-bottom: 8px;
        }
        .secondary-btn {
            background-color: #f5f5f7;
            color: #1d1d1f;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 8px;
        }
        .secondary-btn:hover {
            background-color: #e5e5e7;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>插件设置</h1>
        
        <!-- API设置 -->
        <div class="section">
            <h2>API设置</h2>
            <div class="form-group">
                <label for="api-key">SiliconFlow API密钥</label>
                <input type="text" id="api-key" placeholder="请输入您的SiliconFlow API密钥">
                <div class="info">
                    <p>本插件使用SiliconFlow提供的AI服务进行内容分析。您需要：</p>
                    <ol>
                        <li>访问 <a href="https://www.siliconflow.cn" target="_blank">SiliconFlow平台</a> 注册账号</li>
                        <li>在控制台中获取API密钥</li>
                        <li>将API密钥粘贴到上方输入框中</li>
                    </ol>
                    <p>注意：请妥善保管您的API密钥，不要分享给他人。</p>
                </div>
            </div>
        </div>

        <!-- 模型设置 -->
        <div class="section">
            <h2>模型设置</h2>
            <div class="form-group">
                <label for="model">选择模型</label>
                <select id="model">
                    <!-- 模型选项将由JavaScript动态填充 -->
                </select>
                <p class="param-description">选择要使用的AI模型，不同模型有不同的特点和性能表现。</p>
            </div>
        </div>

        <!-- 生成参数设置 -->
        <div class="section">
            <h2>生成参数设置</h2>
            <div class="form-group">
                <label for="max-tokens">最大生成长度</label>
                <input type="number" id="max-tokens" min="1" max="4096">
                <p class="param-description">设置AI生成内容的最大长度（1-4096）。</p>
            </div>

            <div class="form-group">
                <label for="temperature">随机性（Temperature）</label>
                <input type="number" id="temperature" min="0" max="2" step="0.1">
                <p class="param-description">控制输出的随机性（0-2），较高的值会使输出更加多样化，较低的值会使输出更加确定。</p>
            </div>

            <div class="form-group">
                <label for="top-p">Top P</label>
                <input type="number" id="top-p" min="0" max="1" step="0.1">
                <p class="param-description">控制输出的多样性（0-1），影响模型选择词的范围。</p>
            </div>

            <div class="form-group">
                <label for="top-k">Top K</label>
                <input type="number" id="top-k" min="1" max="100">
                <p class="param-description">限制每一步生成时考虑的词的数量。</p>
            </div>

            <div class="form-group">
                <label for="frequency-penalty">频率惩罚</label>
                <input type="number" id="frequency-penalty" min="-2" max="2" step="0.1">
                <p class="param-description">降低模型重复使用相同词语的倾向（-2到2）。</p>
            </div>

            <div class="form-group">
                <label for="presence-penalty">存在惩罚</label>
                <input type="number" id="presence-penalty" min="-2" max="2" step="0.1">
                <p class="param-description">降低模型谈论相同主题的倾向（-2到2）。</p>
            </div>
        </div>

        <!-- 提示词设置 -->
        <div class="section">
            <h2>提示词设置</h2>
            <div class="form-group">
                <label for="custom-prompt">自定义提示词</label>
                <textarea id="custom-prompt" rows="10" placeholder="在此输入您的自定义提示词，留空则使用系统默认提示词"></textarea>
                <button id="reset-prompt" class="secondary-btn">恢复默认提示词</button>
                <p class="param-description">
                    您可以自定义AI分析文章时使用的提示词。系统会将您的自定义提示词与系统基础提示词结合使用。<br>
                    注意：请确保提示词包含输出格式的要求，建议使用HTML标签进行格式化。
                </p>
            </div>
        </div>

        <button id="save-btn" class="save-btn">保存设置</button>
        <div id="status" class="status"></div>
    </div>
    <script type="module" src="options.js"></script>
</body>
</html> 